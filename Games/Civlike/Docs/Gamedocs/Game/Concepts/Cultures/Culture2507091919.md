# Culture System – Unified Specification (v2 • 2025‑07‑09)

_This document merges the original Culture pillar files with all 2025‑07 brainstorming updates. Headings have been reorganised so related mechanics sit together; no concepts have been dropped._

---

## 0 · Purpose & Philosophy

A light‑weight, data‑driven model that lets cultures **emerge, drift, split and fuse** organically while giving players only indirect "nudges". The system plugs into every other pillar (Trade, Population, Diplomacy, Warfare, Environment, Disease) and scales to thousands of Population Centres on a 7‑subdivision icosphere.

---

## 1 · Core Data Model

| Field           | Range / Type | Meaning                                                                    |
| --------------- | ------------ | -------------------------------------------------------------------------- |
| **Salience S**  | 0‑100 %      | Share of the culture that _values_ an Aspect.                              |
| **Rigidity R**  | 0‑100 %      | How strongly the culture _defends_ the Aspect.                             |
| **Polarity P**  | ‑1.0 … +1.0  | Positive vs negative expression of the Aspect (percentage; ±1.0 ≙ ±100 %). |
| **Followers**   | int          | Head‑count of this culture in the Pop‑Centre.                              |
| **Feats[]**     | struct       | List of permanent achievements (see §4).                                   |
| **isReligion**  | bool         | True if the Culture object is a religion.                                  |
| **Promoters[]** | struct       | Activity‑tagged pressure sources (see §2.2).                               |

### 1.1 Aspect Lifecycle

Birth → Growth → **Codification** (rigidity snaps to 90 %, halves drift) → Decline → Fragment/Heritage.

---

## 2 · Drift & Influence Engine

```
baseInfluence = followers × avgPathSpeed / pathDistance
featMultiplier = Π(1 + featBonus_i)        // §4
influence      = baseInfluence × featMultiplier
received       = influence × scholarBoost  // §2.1
```

- **avgPathSpeed** comes from the Trade/Movement route cache (terrain & tech aware).
    
- Each sink Pop‑Centre normalises the vector sum of all incoming influences before applying ΔS/ΔP.
    

### 2.1 Scholar Boost

```
scholarBoost = 1 + (scholarCount / popTotal) × kScholar    // default k=2.0
```

Scholar POPs come from education vocations; tech unlocks raise head‑count, not the constant.

### 2.2 Promoter Layer (Activity Tags)

```
Consumption, Extraction, Production, Construction, Military,
Ritual, TradeLegal, TradeIllicit, Arts, Education, Law, Sport,
Migration, Environment, Diplomacy, Health
```

Game activities push **Promoters** that modify ΔS/ΔP each tick.

### 2.3 Linked‑Pair Siphon

Monthly Salience siphon from parent Aspect to derived child Aspect (halved if parent R high).

### 2.4 Drift & Pressure Resolution

- **Promoters produce additive pressure.** Each tick, every active promoter outputs a small ΔS and/or ΔP value. All sources (influence, religion, activity promoters, siphon) are summed:
    
    ```
    ΔS_total = Σ promoterΔS
    ΔP_total = Σ promoterΔP
    ```
    
- **Apply & clamp.** New values are
    
    ```
    S′ = clamp(S + ΔS_total, 0, 1)
    P′ = clamp(P + ΔP_total, ‑1, +1)
    ```
    
    If S or P is already at its cap, additional same‑direction pressure is absorbed with **no change**.
    
- **Unrest only on change.** Pressure generates unrest **only if** S′ ≠ S or P′ ≠ P. Harmless pressure (e.g., pushing a maxed‑out Salience further up) is ignored.
    
- **Rigidity dampens drift.** Before summation, each promoter’s ΔS is scaled by `kS(R)`; ΔP by `kR(R)` (values in _CultureConstants.json_). High‑rigidity aspects drift slowly even under strong pressure.
    
- **Religion drift is additive too.** The `kRel_eff × (Target – Current)` term in §5.1 merely computes the _additive_ promoter for that tick; once generated, it obeys the same rules above.
    

---

## 3 · Multi‑Layer Culture Tree & Migration

- **City leaf → parent → meta‑culture** hierarchy.
    
- **Break‑away** when Σ|ΔS| + Σ|ΔP| + Σ|ΔR|×0.25 > BreakawayThreshold for _N_ years.
    
- **Merge / Hybrid** when distance drops below HybridThreshold.
    
- **Slot‑or‑Spawn Migration** – incoming POP assimilates if proximity ≤ ASSIMILATE_THRESHOLD else spawns new leaf; tiny packets auto‑assimilate.
    

---

## 4 · Feats & Wonders

|                    |           |                                                                     |
| ------------------ | --------- | ------------------------------------------------------------------- |
| Feat               | featBonus | Notes                                                               |
| Wonder             | +10 %     | Snapshot promoter; multiple wonders stack multiplicatively (1.10ⁿ). |
| Epic Poem / Saga   | +3 %      | Decays 1 % per year once Salience < 20 %.                           |
| Festival Cycle     | +1 %      | Recurring; costs player subsidy.                                    |
| Trade Armada       | +5 %      | First inter‑continental convoy.                                     |
| Exploration Voyage | +5 %      | First circumnavigation.                                             |
| Great Library      | +7 %      | Also grants flat Scholar POP bonus (TBD).                           |

_Future “pride buffs” (morale, output, tax…)_ **_still TBD_** _– see §12 TODOs._

---

## 5 · Religion System

### 5.1 Follower ↔ Faith Drift

```
kRel_eff = kRel_base(R_faith) × (Salience_faithAspect / 100)
ΔS_i     = kRel_eff × (Target_S_i – S_i)
ΔP_i     = kRel_eff × (Target_P_i – P_i)
ΔS_flock = kFlock × (S_follower – S_faith)   // slow push‑back

*This expression yields an **additive promoter** for the current tick. The value is forwarded to the standard drift pipeline in §2.4; it does **not** directly set S or P to the target values.*
```

### 5.2 Schism

Trigger when follower Salience ≥ 60 %, Rigidity ≥ 90 %, |ΔP| ≥ SchismGap → _Heresy_ (new religion culture) after GracePeriod.

---

## 6 · Crisis & Unrest

- **Aspect Tension** converts extreme |ΔP| into unrest.
    
- **Faction Satisfaction** monitors class demands.
    
- **Concession Cards** (Festival, Tax Cut, Militia, etc.) provide player‑driven culture nudges with material costs.
    

---

## 7 · External Feedback Loops

|   |   |
|---|---|
|Source|Effect on Culture|
|**Warfare**|Battle & training logs push Militarism / Pacifism promoters.|
|**Disease & Health**|Hygiene norms, quarantine, existential fear promoters; taboo catalogue ties into Purity vs Cosmopolitanism aspects.|
|**Environment & Disasters**|Myth promoters and migration shocks feed Soft‑Culture Patterns.|
|**Trade**|Route creation events can spawn Trade Armada feats; tonnage influences drift speed.|

---

## 8 · Cultural Events & Content Generation

- Monthly probability `p(t)=p_max/(1+e^(–k(t–t_mid)))`, defaults 0.9/24 mo/0.15.
    
- Deterministic threshold events enqueue first; otherwise roll a Wildcard (weights use hidden seeds: prophet charisma, relic authenticity…).
    
- **Gap‑Scanner** seeds new Aspects when unrepresented cues exceed soft‑cap.
    

---

## 9 · UI & Player Feedback

- **Culture Ledger** – rows: sparkline (10 y S), polarity chip, rigidity lock; sortable.
    
- **Map Overlay** – heat‑map of dominant influence radius with click‑through to filtered ledger.
    

---

## 10 · Constants & Tunables

Maintained in data files for modders:

- _CultureConstants.json_ – `kScholar`, BreakawayThreshold, HybridThreshold, RigidityWeight, `kRel_base` curve…
    
- _FeatBonuses.csv_ – FeatID, bonus, decay.
    
- _EventCurve.csv_ – `p_max`, `t_mid`, `k`.
    

---

## 11 · Inter‑Pillar API Stubs

- `CreateBillFromAspect` → Law
    
- `GetDyadicCultureProximity` → Diplomacy
    
- `PushPromoter(ActivityTag, AspectId, Δ)` → all pillars
    

---

## 12 · TODO Backlog

1. Decide **Wonder pride buffs** (morale, output, tax…).
    
2. Flesh out **Scholar vocations** vs composite POP type.
    
3. Balance `kFlock` & `kRel_base` curves.
    
4. UI polish: chip artwork, sparkline colour themes.
    
5. Prototype performance – influence matrix on 4 k+ Pop‑Centres.
    
6. Ethnic culture split variant for Schism.
    

---

## 13 · Glossary & Terminology Sync

Authority → Authoritarianism, Missionary → Evangelist, MILITARY:Battle → MILITARY:BattleTick, etc.

---

## 14 · Prompt Templates (Design‑time Only)

- _AspectList Brainstorm_ – GPT prompt for new aspect ideas.
    
- _CultureAspectDocGPT_ – template for auto‑documenting aspect bundles.
    

---

_End of specification_