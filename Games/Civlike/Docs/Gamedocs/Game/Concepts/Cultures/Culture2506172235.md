Keep this file open beside every culture‑related chat so context is never lost. Obsidian will wrap long paragraphs; explicit breaks only where needed.

---
## 1  Core Vocabulary
- **Culture** – all **Aspects** shared by a population centre.
- **Aspect** – triple of **Salience S** (0‑100 %), **Polarity P** (–100…+100 %), **Rigidity R** (0‑100 %). Default R‑cap 50 %; rises to 90 % via codification.
- **Drift** – automatic monthly pull: `ΔS = kS·(TargetS – S)`.
- **Pressure** – time‑boxed shove (edict, famine, propaganda). Unrest per tick = `|Δ| × R × k_unrest`.
- **Promoter** – `{channel, tagFilter, shareThreshold, driftWeight}` that spawns or tugs an Aspect.
- **Seed** – transient object spawned by the **Gap‑Scanner** when a social function (cohesion, diversion, legitimacy, etc.) scores high. Chooses template → calls `CreateAspect()`.
- **Fragment** – archival snapshot of a dead Aspect for rediscovery events.

---
## 2  Activity Logging Loop
### 2.1  Full Channel Roster
1 Consumption   2 Extraction   3 Production   4 Construction   5 Military   6 Ritual   7 Trade   8 Arts   9 Education   10 Law   11 Politics   12 Health   13 Migration   14 Diplomacy   15 Technology   16 Exploration   17 Environment   18 Sport   19 Kinship   20 Crime (Illicit). _(Channels beyond the original seven are_ **_work‑in‑progress_**_; subsystems should emit calls but culture effects may be un‑tuned.)_
### 2.2  Event Hook Pattern
Subsystems call `ActivityLog.Add(channel:TAG, amount)` once per meaningful event (kg food withdrawn, m² built, soldier‑day fought). City logs aggregate daily → monthly snapshot → handed to culture engine. Units on campaign forward `battleDays` & `foreignExposure` to their **home barracks**, which injects them into the Military and Trade channels each month.

---
## 3  Aspect Lifecycle
1 **Spawn**  Seed fires _or_ player Patron Project. Start S 5‑15 %, P ±0.15, R 0; promoters attached; optional free building.  
2 **Growth**  `ΔR = kR·S·(1 – R/Rcap)` with two buckets: _kR_fast_ (20 y to entrench) for food/fashion/sport, _kR_slow_ (40‑50 y) for religion/law.  
3 **Codify Tradition**  Monumental buildings raise R‑cap (+2 % each) and add soft +P pressure.  
4 **Decline**  If promoters dry or rival Aspect dominates, S drifts; when S < 5 % & R < 10 % Aspect dies → Fragment saved (if Writing tech).  
5 **Schism / Revolt**  Total Tension × pop > threshold opens Crisis Panel; failed concessions split culture.

---
## 4  Gap‑Scanner (soft‑culture spark)

Every 5 y each city scores six **social functions**: COHESION, DIVERSION, LEGITIMACY, REDISTRIBUTION, IDENTITY, INHERITANCE. Scores draw from unrest, population mix, Gini coefficient, disaster count, prestige, property disputes. If any score > threshold, spawn Seed → weighted template list → new Aspect. _(Scoring formulas are_ **_WIP_**_.)_

---
## 5  Soft‑Culture Creation Patterns
**Bottom‑up Spark** – Engine rolls template; pop‑up gives _Embrace / Guide / Ignore / Condemn_.  
**Top‑down Patronage** – Player spends gold/influence to spawn chosen template at S 15 %; free building + booster promoter.
### 5.1  Religion Driver Table
| Driver    | Game condition          | Template              | Promoters                                  |
| --------- | ----------------------- | --------------------- | ------------------------------------------ |
| Cohesion  | unrest ≥ 25 %           | Ancestor Shrine       | RitualHours@Shrine 1.4; KinInheritance 0.5 |
| Hierarchy | Gini > 0.35 & new ruler | Divine Kingship Cult  | CourtCeremony 1.0; TaxTithe 0.6            |
| Disaster  | ≥2 calamities/10 y      | Sky‑Storm Rite        | RitualHours@Altar 1.2; CropLoss 0.8        |
| Trade     | export tonnage high     | Merchant Patron Deity | CaravanArrivals 1.1; MarketTurnover 0.9    |
_(Add SPORT, Arts, Marriage templates similarly –_ **_WIP_**_)_

---
## 6  Military → Culture Feedback
Each unit (≤1 000 soldiers) logs `battleDays` + `foreignExposure[Aspect]` while deployed. Sponsoring barracks converts logs each month into:
```
driftΔS = battleDays * battleWeight   // TUNE_LATER: 0.2
driftΔS += Σ(foreignExposure[A] * foreignWeight) // TUNE_LATER: 0.1
```
Signals feed Warrior Rituals, Pacifism polarity, foreign food/art Aspects. Exposure below `MIN_FOREIGN_SALIENCE` (5 %) ignored.

---
## 7  Crisis Panel & Concessions
Monthly overlay when unrest high: list tense Aspects, faction Satisfaction, city riots. Drag **Concession cards** (festival, tax repeal, militia, temple subsidy, police sweep) onto rows. Cards have real economy costs and side‑effects. Unrelieved pips spill into riots or schism.

---
## 8  Taboo / Moral Opposition
If brutality, polarity or resource strain crosses thresholds, engine spawns **Opposition Seed**: negative‑polarity Aspect tagged _Taboo_; attaches promoters to `LAW/Prosecution` and `CRIME/Illicit`. Police funding can push its Salience or create unrest. _(Detailed thresholds_ **_WIP_**_.)_

---
## 9  Cultural Complexity (admin soft‑cap)
Each active Aspect adds `k_family` points to a city’s **Complexity**. Civic upkeep scales with Complexity → soft cap on endless religions/sports. Default `k_family` values: Food 0.5, Religion 1.5, Sport 0.8, Ideology 1.0. _(Tuning_ **_WIP_**_.)_

---
## 10  Player Interaction Cheatsheet
- **Spark pop‑up** shapes initial P (+/-) & free building.
- **Patron Project** for mid/late‑game cultural engineering.
- **Crisis Panel** every unrest month → Concession cards relieve Tension.
- **Spy Network lvl 3** reveals black‑market; _Police Sweep_ converts illicit flow to relief.

---
## 11  Quick‑Reference Constants
```
FREE_DRIFT_RATE      = 0.005    // P‑units per month unrest‑free
MIN_FOREIGN_SALIENCE = 0.05     // 5 % exposure cutoff
DEFAULT_BIRTH_S      = 0.08
DEFAULT_BIRTH_P      = ±0.15
kS_default           = 0.1      // placeholder; tunes Salience speed (***WIP***)
kR_fast              = value giving 80 % S for 20 y → R≈35 %
kR_slow              = value giving 80 % S for 45 y → R≈35 %
```
All constants flagged **TUNE_LATER**.

---
## 12  To‑Do / Tune Later
- Finalise channel list & measurement units.
- Fill SPORT, Arts, Marriage template tables.
- Balance promoter weights, Concession card costs, admin Complexity curve.
- Implement AI logic: accept sparks by ROI; use Patron Projects when gold > X.
- Savegame compression strategy for low‑Salience Aspects.
- Document exact Gap‑Scanner formulas.

— End of reference (v 2025‑06‑17).