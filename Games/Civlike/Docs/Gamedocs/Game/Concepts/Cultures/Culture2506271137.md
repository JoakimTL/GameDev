# 4x RT GS Game – Culture System (Comprehensive Specification)  

*Revision: 2025‑06‑27*
> **Legend**  
> **WIP** – placeholder constant or subsystem still requiring balance or detail.  
> **NEW 2025‑06‑27** – indicates content added in this revision.

---
## Table of Contents  

1. Core Data Model  
2. Activity & Promoter Layer  
3. Aspect Lifecycle  
4. Soft‑Culture Patterns  
5. Crisis & Unrest Sub‑system  
6. Military Feedback Loop  
7. Multi‑Layer Culture Tree  
8. Migration “Slot‑or‑Spawn” Logic  
9. Disease ↔ Culture Integration
10. Taboo Driver Catalogue
11. Aspect Evolution (Linked‑Pair Siphon)
12. Art & Music Style Framework
13. Constants & Tunables (**WIP**)  
14. Prompt Templates (design aides)

---
## 1  Core Data Model
| Field | Range / Type | Notes |
| ----- | ------------ | ----- |
| **Salience S** | 0…100 % | Importance of the Aspect to a culture. |
| **Polarity P** | −1 … +1 | Positive vs negative stance (e.g., Pacifism +0.8 vs Militarism −0.8). |
| **Rigidity R** | 0 … Cap | Cultural inertia. `Cap = 50 %` by default; buildings/codification can raise to 90 %. |
| **AspectId** | GUID | Unique per culture node. |
| **AspectType** | enum | `FoodstuffsAspect`, `MusicStyleAspect`, `TabooAspect`, etc. |
### Drift & Pressure  
```

ΔS = kS × (Target S – S)

ΔR = kR × S × (1 – R / Cap)

Pressure_Stress = |ΔP_pressure| × R

Unrest = Pressure_Stress × unrestCoeff

```
*kS* and *kR* come in **fast** (fads, food, fashion) and **slow** (religion, law) buckets.

---
## 2  Activity & Promoter Layer
### 2.1 Channels  
```

Consumption, Extraction, Production, Construction, Military,

Ritual, Trade, Arts, Education, Law, Sport, Migration,

Environment, Diplomacy, Health, Crime   **WIP** (merge if idle)

```
### 2.2 Promoter Schema
```

{ channel, tagFilter, shareThreshold, driftWeight, isNegative? }

```
*Negative promoters* drive taboos (Salience falls as activity rises).

---
## 3  Aspect Lifecycle
1. **Birth** – via *Bottom‑up Seed* (gap‑scanner) or *Top‑down Patronage* (player).  
2. **Growth** – activity drift; Rigidity S‑curve.  
3. **Codification** – buildings/decrees raise `Cap`, often add bonuses.  
4. **Decline** – reverse drift or siphon drain.  
5. **Fragment / Heritage** – optional dormant state (records tourism).  

---
## 4  Soft‑Culture Patterns
### 4.1 Gap‑Scanner Functions  
| Code | Trigger Metrics | Example Template |
|------|-----------------|------------------|
| COHESION | unrest % + ethnic mix | Ancestor Shrine |
| DIVERSION | idle hours, youth unrest | Stone‑Ring Wrestling |
| LEGITIMACY | Gini + new ruler | Divine Kingship Cult |
| … | … | … |
### 4.2 Religion Seeds (drivers ↔ triggers)  
*Costly Signalling, Disaster, Trade‐Network, etc.*
### 4.3 Art & Music Styles (see §12)
### 4.4 Taboo / Moral Opposition (see §10)
### 4.5 Cultural Complexity Soft Cap **WIP**  
Admin upkeep raises per active Aspect; UI bar warns at 80 %.

---
## 5  Crisis & Unrest Sub‑system
* Monthly pop‑up if `GlobalUnrest ≥ threshold`.  
* **Aspect Tension Table** + **Faction Satisfaction**.  
* **Concession Cards**  
  * Festival, Tax Cut, Militia, Temple Subsidy  
  * **NEW**: Close Markets (quarantine), Fund Infirmaries, Scapegoat Decree.  
* Outcomes: revolt, schism, status‑quo.

---
## 6  Military Feedback Loop
* Unit (≤1 000 soldiers) logs `battleDays`, `trainingDays`, `foreignExposure`.  
* Monthly, sponsoring **barracks/levy hall** converts logs → drift / pressure on home city.  
* Promoters: `MILITARY:Battle` for Warrior Rituals, `FOREIGN:Food` for new cuisines.

---
## 7  Multi‑Layer Culture Tree
* **City cultures** are leaves; **parent cultures** are population‑weighted means (no cohesion pull).  
* **Break‑away**: distance > `BreakawayThreshold` for N years → new parent culture.  
* **Merge**: parents whose distance < `MergeThreshold` may fuse.  
* Distance metric uses weighted ∑|ΔS| + ∑|ΔP|.

---
## 8  Migration “Slot‑or‑Spawn” Logic
```

If migrant.parent == cityCulture.parent and dist ≤ ASSIMILATE_THRESHOLD

      → join nearest culture, average S/P.

Else

      → spawn new leaf under that parent.

```
Tiny packets (<`MIN_GROUP_SIZE`) auto‑assimilate; limit `MAX_CULTURES_PER_CITY` via forced merge.

---
## 9  Disease ↔ Culture Integration **NEW**
* **Disease object** with `transmissionTags`, `fatalityRate`, `R0_base`.  
* Spread via Activity tags (Trade:WaterCargo, Ritual:MassGathering, Military).  
* **ExistentialFearScore** rises → seeds Healing Temple / Purification Rite.  
* Hospital usage promotes Hygiene Norm Aspect.  
* Quarantines depress Cosmopolitanism; Taboo drivers trigger on repeat vectors.

---
## 10  Taboo Driver Catalogue **NEW**
| Driver | Trigger | Example Taboo |
|--------|---------|---------------|
| Disease/Hygiene | ≥2 epidemics same vector | Pork Ban |
| Ecological Scarcity | resource <20 % yield | Sacred Grove |
| Costly Signal | Cohesion gap & high inequality | Fasting Day |
| Purity Symbolic | Religion R>40 % + new canon | Shellfish Ban |
| Boundary Marker | ForeignTrade>30 % + Identity gap | Tattoo Stigma |
| Pastoral vs Farmer | Militarism<−0.3 + Crop harvest | Grain‑Eater Stigma |
| Elite Power | Gini high + Authority P>0.6 | Commoner Silk Ban |
| Conquest Imposition | City captured & militarism high | Old Flag Forbidden |
Taboo Aspect spawns with negative promoter (isNegative=true) and Cohesion bonus `0.03×S×|P|`.

---
## 11  Aspect Evolution – Linked‑Pair Siphon **NEW**
* `EvolutionOption` row per parent.  
* On trigger (driverTags + threshold), spawn child Aspect; create `EvolutionLink`.  
* Each month:  
  ```

  S_parent -= siphonRate × S_parent

  S_child  += siphonRate × S_parent

  if S_parent ≤ cutoff → retire parent

  ```
* SiphonRate halved if `R_parent > minRigidity`.

---
## 12  Art & Music Style Framework **NEW**
* **AspectType** `MusicStyleAspect`, `PaintingStyleAspect`, etc.; concrete `styleTag`.  
* Evolution chain via `EvolutionOption` (Classical → Romantic → Modernist).  
* **Buildings**  
  | Gallery | promoter ×1.5, Happiness +0.5 × S |
  | Concert Hall | promoter ×1.5, Tourism +1 × S (Wonder tier) |
* **Derivative Seed**: if parent S≥60 % & R<60 % & driver met → spawn child even if parent not rigid.

---
## 13  Constants & Tunables (**WIP**)
```

ASSIMILATE_THRESHOLD     = 0.15

BreakawayThreshold       = 0.30

HybridThreshold          = 0.15

siphonRate_default       = 0.02

cutoffSalience_default   = 0.05

Fear_to_GapScanner       = 1.0

Hospital_Mitigation      = 0.4

TradePenalty_Quarantine  = 0.10

MAX_CULTURES_PER_CITY    = 12   **WIP**

```

---
## 14  Prompt Templates **NEW**
### 14.1 AspectList Brainstorm  
*(see prompt in documentation appendix)*
### 14.2 CultureAspectDocGPT Creation Prompt  
*(full template for GPT to output spec)*

---
### End of Specification