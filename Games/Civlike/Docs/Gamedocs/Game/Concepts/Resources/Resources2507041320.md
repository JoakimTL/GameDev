# 4× RT GS – Core Concepts Reference

_Unified design digest • Revision 2025‑07‑04_

> **Scope** – A single, always‑green overview of every major subsystem touched so far (resources, surveying, technologies, events, navigation). All JSON schemas live in dedicated files; here we give the _why_ and _how_ plus key field quick‑look tables.

---

## 1  Resource Layer

### 1.1 ResourceType (intrinsic)

- Lives in `/Resources/<PluralCategory>/*.json`.
    
- **Partial‑merge** rules ­→ scalars last‑wins, arrays ∪, objects deep‑merge, **extensions closed/override‑only**.
    

| Field | Meaning | |‑‑‑‑‑‑‑|‑‑‑‑‑‑‑‑‑| |`id`|slug key, must be unique across all mods| |`name`|English display string| |`tags[]`|queryable keywords – recipes & survey match on these| |`unitName` / `unitMassKg`|quantification vs weight| |`renewableBehaviour`|`IRenewableBehaviour` class or `null`| |`composition`|macro‑nutrients (food only) | |`requiresSurveying`|bool – hides node until discovered| |`extensions`|keyed closed records (`metalProps`, `foodProps`, …)|

**Collision policy** – identical except extra tags → tags merge; any other diff → hard error (loader prints both file paths).

### 1.2 ResourceNode (per‑tile)

```
class ResourceNode {
    string resourceId;
    double depthM;          // world‑gen
    double thicknessM;
    double totalKg;         // undiscounted
    double remainingKg;
    double sparsityK;       // yield falloff
    SurveyState survey;     // unknown → detected → full
    double abundanceErrorPct;
}
```

`List<ResourceNode>` split into _hidden_ vs _revealed_ on each triangular tile (~1 200 km²).

### 1.3 World‑gen knobs (excerpt)

- `abundanceMultiplier 0.5…2.0` – global richness.
    
- Per‑tag overrides (e.g. `luxuryRichnessBias`).
    

---

## 2  Surveying System

### 2.1 SurveyTechnique JSON (data‑driven)

Key fields: `durationDays`, `labourPerDay`, `detectionRules[]` (`matchTags|Ids`, `minDepthM`, `maxDepthM`, `abundanceErrorPct`, `revealAbundance`).

Techniques unlocked/modified via Technology tree; survey Buildings reference technique IDs.

### 2.2 Buildings

|Tier|Building|Unlock Tech|Core Technique|Depth Cap| |‑‑‑|‑‑‑|‑‑‑|‑‑‑|‑‑‑| |I|Prospector’s Camp|Rope Surveying|Surface Recon|10 m| |II|Geological Hut|Geology I|Strata Mapping|50 m| |II|Core Drilling Rig|Diamond Coring|Core Sampling|500 m| |III|Seismic Crew HQ|Seismic I|Seismic Survey|2 km| |IV|Remote Sensing Station|Airborne Magnetics|Aerial Scan|700 m (area) | |IV|Satellite Survey Centre|Satellite 1|Global Scan|planet|

Each building also grants cumulative **construction speed** bonuses (better site layout).

### 2.3 Workflow Summary

1. Player selects **“Survey for X”** on a tile using a qualifying building.
    
2. Engine instantiates `SurveyAction` (tracks progress, labour, equipment).
    
3. Upon completion detection rules fire on hidden nodes → `SurveyResult` objects, storing presence and fuzzy abundance.
    
4. Results upgrade as better techniques re‑survey.
    

### 2.4 Event Hooks (examples)

- **Oil Gusher** – 1 % chance on first Core Sample that intersects oil.
    
- **Magnetic Anomaly** – Remote Sensing finds rare‑earth node. Events scripted in data; weights moddable.
    

---

## 3  Technology Framework (recap)

- **Progress Points (PP)** gating with _Discovery 25 %_ / _Research 100 %_ stages.
    
- **Dependency Cap Rule** – tech progress ≤ min(prereqs).
    
- Partial tech template in `/Technologies/*.md` (matches the tag structure below).
    

### 3.1 Survey & Measurement Track (initial)

| Tech                       | Progress | Discovery Effects                           | Research Effects                                   |
| -------------------------- | -------- | ------------------------------------------- | -------------------------------------------------- |
| Rope Surveying             | 50 PP    | Prospector’s Camp, Surveyor Hut             | +5 % local construction speed                      |
| Optical Instruments        | 120 PP   | Surface Recon radius +1                     | Coastal nav distance +1 tile                       |
| Natural Philosophy (Geo I) | 200 PP   | Geological Hut; coal/copper reveal ≤50 m    | +10 % ore abundance accuracy                       |
| Diamond Coring             | 350 PP   | Core Drilling Rig                           | Wells deeper 250 m                                 |
| Geophysics (Seismic I)     | 500 PP   | Seismic Crew HQ                             | +15 % road/rail build speed                        |
| GPS & LiDAR                | 800 PP   | Satellite Survey Centre; global auto‑reveal | +25 % all construction; unlimited sea route length |
Tech files mirror the standard Markdown template (#technology tag etc.).

---

## 4  Navigation Tie‑ins


| Nav Tech              | Max Safe Sea Tiles | Trade Speed Bonus  |
| --------------------- | ------------------ | ------------------ |
| Dead Reckoning        | 6                  | 0%                 |
| Compass               | 12                 | +5%                |
| Sextant + Chronometer | 25                 | +10% & -piracy     |
| Radio Direction       | 40                 | +15%               |
| GPS                   | ∞                  | +25% & auto-routes |
Survey buildings share tool chains with navigation → e.g. manufacturing **Chronometers** consumes brass & glass.

---

## 5  Interactions with Culture & Trade

- **Promoters**: `Extraction:<resourceId>` and `Survey:<techTag>` channels feed Cultural Salience (see Culture spec §2.1).
    
- **Events** like a spectacular Oil Gusher spike _Technophilia_ Aspect.
    
- **Surveyor labour class** forms new vocational demand & education path, generating **Progress Points** for tech.
    

---

## 6  Implementation Notes

- All data structures (`ResourceType`, `SurveyTechnique`, `Tech`, `Building`) follow the **partial definition & merge** paradigm.
    
- Loader prints warnings for scalar overrides; fails hard on schema or extension mismatches.
    
- Engine services: `ISurveyService`, `IRenewableService`, `ITechProgressService`.
    

```
flowchart TD
    subgraph Tile
        R1((Hidden Node))
        R2((Revealed Node))
    end
    Building -->|SurveyAction| Tile
    Tile -->|SurveyResult| R2
```

> **Pending** – world‑gen node rarity tables, survey labour cost formulas, and per‑resource depth bands (move to balancing sheet).

---

### Change Log

|Date|Author|Summary| |‑‑|‑‑|‑‑| |2025‑07‑04|Design GPT|Initial unified doc (resources, surveying, tech, nav).|

— _End of reference._