# Warfare System – Comprehensive Design Draft (v0.1)

> _All mechanics drafted here are subject to balance‑pass tuning. Values flagged_ **_ⓟ_** _are placeholders. An_ **_Outstanding Action List_** _appears at the end so we never lose next‑step items._

---

## 1  Scope & Philosophy

The Warfare pillar stitches together **Strategy (Static Doctrines)**, **Operational Logistics**, and **Tactical Auto‑Battles** while remaining fully integrated with the Culture, Trade, Technology and Population pillars. Two complementary abstraction layers model human behaviour:

- **Static Doctrines** – Institutional theory & force‑structure set by generals and planners.
    
- **Proficiencies** – Practical skill retained through drill and combat by frontline troops.
    

Together they decide _what_ an army can do and _how well_ it actually does it.

---

## 2  Static Doctrines  (“School of Thought”)

- **Trees:** _Manœuvre_, _Deep Battle_, _Attrition_, _Carrier Strike_, _Total Air Superiority_, etc.
    
- **Unlocks:** Empire‑wide passives (e.g., +Combat Width, −Supply Consumption) and new **Command Skills** (e.g., _Feigned Retreat_, _Carrier Air Raid_).
    
- **Switch Cost:** ‑25 Political Capital ⓟ + 180 days lockout.
    
- **Persistence:** Doctrines do **not** decay; they represent textbooks, academies, and career‐long officer education.
    

---

## 3  Proficiency System  (“Boots‑on‑Ground Skill”)

|Mechanic|Rule|Notes|
|---|---|---|
|**Tags**|`infantry`, `cavalry`, `armour`, `siege`, `naval`, `air`|Derived from equipment roster.|
|**XP Gain**|+1 XP per battle tick; +0.2 XP per training tick × building multiplier|Buildings (_Drill Square_ ×1.3, _War College_ ×2).|
|**Decay**|−0.2 % of current XP per day with no activity|Skill‑fade curve.|
|**Ranks**|25 / 50 / 75 / 100 → choose a **Perk**|e.g., _Square Volley_ (+ROF), _Overrun_ (+Breakthrough).|
|**Perk Slots**|Base 2 per doctrine; +1 per _War College_ tier|Only equipped perks are active.|

---

## 4  Combat Mechanics

### 4.1 Frontline & Support Grid

- **Combat Width**: Base 3 slots +2 per tech tier.
    
- **Support Rule**: Only **one** support division may skirmish a frontline slot per tick; excess supports idle but eat supply.
    
- **Swap Rule**: When a frontline division retreats it must finish a 3‑tick animation before a reserve replaces it.
    

### 4.2 Command Skills

|   |   |   |   |   |
|---|---|---|---|---|
|Order|Cast (time)|Gating Resource(s)|Cooldown|Effect|
|**Artillery Barrage**|10 s ⓟ|`ammo/shell` ≥ n|30 s ⓟ|AoE soft‑attack, suppress morale|
|**Cavalry Charge**|6 s|morale ≥ 70 %|none|×1.5 breakthrough, morale shock|
|**Feigned Retreat**|4 s|cohesion ≥ 60 %|45 s|Pulls enemy into over‑extension|
|_Skills target entire grid or specific divisions depending on order definition. Casts are_ **_non‑cancelable_** _once started._|

### 4.3 Core Stats  (per averaged division)

`softAttack`, `hardAttack`, `defense`, `range`, `rateOfFire`, `moraleCap`, `speed`.

---

## 5  Supply, Foraging & Logistics

|   |   |   |
|---|---|---|
|Mechanic|Formula|Comment|
|**In‑Supply**|Path ≤ N tiles with Road/Rail ≥ T|N scales with Transport Tech & Logistics‑Doctrine.|
|**Forage Cap**|min(Tile Food × F, TilePop × k) – ForageIntensity|Slider: Light (×0.5) / Normal (×1) / Scorched (×1.5).|
|**Loot Flow**|Goods ride in army buffer; upon entering neutral/friendly tile auto‑ship to capital|Encumbrance slows move speed −10 % per 10 % cargo cap.|
|**Retrofit Labour**|`ceil(weightTon × 1 day + volume × 0.5 day)` (Field Workshop −40 %)|Applies to module installs & salvage.|
|**Salvage**|Broken module → **Damaged** → strip for **Scrap Parts** at 50 % labour|Toggleable for simplicity.|

---

## 6  Siege & Fortifications

- **Siege‑Engine Units:** Trebuchet, Bombard, Howitzer; each applies `wallDamage p/s`.
    
- **Wall HP:** Tile building _Fortification Level_ × 1 000 HP ⓟ.
    
- **Breaching:** At 0 HP, attacker may **Assault** (normal combat with −defender terrain bonus).
    
- **Field Fortifications:** `Counterscarp`, `Redoubt` temporary buildings; add HP and slow relief‑army entry.
    
- **Attrition:** Defender supply drain + disease chance; scales with climate & sanitation tech.
    

---

## 7  Formation Hierarchy & Designer

- **Canonical Defaults** ship for **Land**, **Naval**, **Air** domains; AI sticks to them.
    
- Players may **clone, rename and nest** any layer. Child‑count rules are editable (e.g., 20 Infantry per Vanguard, 10 Vanguard per Oldguard, 20 Oldguard per General).
    
- UI: Tree view left, selected node’s attachment/grid/editor right.
    

### Canonical Seeds (editable)

```
Land    : Squad → Platoon → Company → Battalion → Brigade → Division → Corps → Army Group
Naval   : Ship → Division → Squadron → Flotilla → Task Force → Fleet
Air     : Aircraft → Flight → Squadron → Group → Wing → Numbered Air Force
```

---

## 8  Mercenaries, Levies & Loyalty

- **Loyalty %** decays if unpaid, under‑supplied or heavy losses.
    
- At ≤20 % triggers **Defect Auction**; AI realms may bid gold/equipment.
    

---

## 9  Culture Hooks (war‑linked Aspects)

|   |   |   |   |
|---|---|---|---|
|Aspect|Trigger|Immediate Effect|Fade Rule|
|**Militarism**|≥3 victories in 12 mo|+Morale Cap|−2 / year|
|**Hero Cult**|Decisive win <50 % losses|+Prestige, cheaper elites|event|
|**Pacifist Backlash**|War > 18 mo|−Happiness, +Unrest|clears after 12 mo peace|
|**Honour Debt**|Capital lost|+Recruit speed, −Tax income|until recaptured|
|**War Weariness**|Casualties + Months at war|Negotiation lever|−Y / mo peace|

---

## 10  Negotiation & Peace

- No monolithic “Warscore”. AI peace logic weights:
    
    1. **Objectives Held %**
        
    2. **Casualty Ratio**
        
    3. **War Exhaustion Differential**
        
    4. **Blockaded Trade Value**
        
- **Raid CB** auto‑ends at Loot Quota ≥ 100 %; defender gains **Revenge CB** (24 mo expiry).
    

---

## 11  Equipment System  (extended resource w/ modules)

### 11.1 Schema (as resource extension)

```
id: "med_tank_hull_mko"
displayName: "Medium Tank Hull (Mk 0)"
stackSize: 1
basePrice: 12.0
extensions:
  equipment:
    category: Vehicle
    bundleSize: 1
    weightKg: 18_000
    volumeM3: 36
    durability: 0.82
    stats: { hardAttack: 28, defense: 20, speedPenalty: -1 }
    doctrinePrereqs: [ "armoured_warfare" ]
    requires:
      gun_medium: 1
      crew_tank: 5
    slots:
      armour: 2
      engine: 1
    tags: [ "vehicle/tracked" ]
```

### 11.2 Modules / Attachments

```
id: "thicker_plating"
displayName: "Thicker Plating"
extensions:
  equipment:
    category: Attachment
    bundleSize: 1
    weightKg: 650
    volumeM3: 1
    durability: 0.95
    statsMult: { defense: 1.15, fuelUse: 1.05 }
    fitsSlots: [ "armour" ]
```

_Duplicate modules stack multiplicatively where flagged (_`_statsMult_`_)._

### 11.3 Retrofit & Salvage

- **Labour Clock** = `ceil(weightTon × 1 d + volume × 0.5 d)` (Field Workshop −40 %).
    
- **Field Workshop also halves on‑battle breakChance** for equipped modules, reflecting forward repair crews.
    
- Broken modules → **Damaged**; strip for **Scrap Parts** at 50 % labour.
    
- Broken modules → **Damaged**; strip for **Scrap Parts** at 50 % labour.
    

---

## 12  Outstanding Action List

1. Mock‑up Static Doctrine & Proficiency UI, including perk equip screen.
    
2. Implement arbitrary slot keys & stacking validator in equipment JSON schema.
    
3. Finalise retrofit labour constant after first balance pass.
    
4. Decide salvage toggle default and scrap‑to‑metal conversion ratio.
    
5. Create AI heuristics for retrofit vs. new production.
    
6. Prototype Formation Designer UI; test canonical + custom nesting.
    
7. Balance forage multipliers, attrition, and supply‑line length constant.
    
8. Produce first sample data set (4 tank hulls + 6 modules + siege engines) for QA.
    
9. Integrate Culture hook triggers into the core Culture tick.
    
10. Draft Casus Belli catalogue (Raid, Reconquest, Containment…).
    
11. Add tooltips & overflow handling for module icons on division card.
    
12. Test mercenary Defect Auction AI & bidding weights.
    
13. Write JSON schema validator for `statsMult` vs. `statsAdd` vs. `statsReplace` keys.
    
14. Formalise **Cohesion** & **Exhaustion** stat definitions and integrate them into combat resolutions and break mechanics.
    
15. Model **Local‑Market Impact of Foraging**: food price spike → unrest in owning Population Centre.
    
16. Define **Supply‑Line Raiding** as an alternative win‑condition (road/rail destruction ⇒ forced attrition / negotiation leverage).
    
17. Specify **Naval & Air Auto‑Battler Layouts** (line‑of‑battle grid, dogfight swarms) and domain‑specific tweaks.
    
18. Detail **War‑Exhaustion Formula**: precise casualty & duration weights feeding the negotiation bar.
    
19. Verify fuel‑consumption tick for heavy motor units even when idle to represent maintenance drain.